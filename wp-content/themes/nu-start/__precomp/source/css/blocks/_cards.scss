/* 

*/
//

:where(.acf-block.cards) {
	// use variable for padding to keep everything consistent and modifiable
	--acf--cards--padding: #{$margin_4x};
	//
	position: relative;
	//
	&:not(.alignwide, .alignfull) {
		max-width: var(--wp--custom--content-size);
	}
	&.alignwide {
		max-width: var(--wp--custom--wide-size);
	}
	&:not(.has-background) {
		> div {
			border: 1px solid var(--wp--preset--color--neutral-1);
			background-color: var(--wp--preset--color--white);
		}
	}
	> div {
		padding: var(--acf--cards--padding);
		position: relative;
		z-index: 1;
		overflow: hidden;
		// removes first/last child margin top/bot (flush content with vertical edges)
		@include flush_inner_content_vertical();
	}
}

//
// ? full height causes problems when this is not the only child...
//
:is(.acf-block.cards.is-full-height) {
	> div,
	& {
		height: 100%;
	}
}

// ? flush the edges of "full-size" images that are the first child
:is(.acf-block.cards > div > .wp-block-image.size-full:first-child) {
	position: relative;
	margin: 0;
	margin-top: calc(var(--acf--cards--padding) * -1);
	margin-left: calc(var(--acf--cards--padding) * -1);
	width: calc(100% + calc(var(--acf--cards--padding) * 2));
	max-width: calc(100% + calc(var(--acf--cards--padding) * 2));
	margin-bottom: var(--acf--cards--padding);
	img {
		width: 100%;
	}
}

//
//
// ? modify for alignment - text, content, etc
:is(.acf-block.cards) {
	&.has-text-align-right {
		.is-the-view-more-link {
			right: var(--acf--cards--padding);
			left: auto !important;
		}
	}
	&.is-vertically-aligned-center {
		display: flex;
		flex-flow: column nowrap;
		justify-content: center;
		> div {
			height: auto;
		}
	}
	&.is-vertically-aligned-bottom {
		display: flex;
		flex-flow: column nowrap;
		justify-content: flex-end;
		> div {
			height: auto;
		}
	}
}

//
//
//
:is(.acf-block.cards[data-clickable-area="true"]) {
	position: relative;
	> .is-card-clickable-area-anchor {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: 2;
	}
	//
	//
	.is-the-view-more-link {
		position: absolute;
		padding: 0;
		margin: 0;
		bottom: var(--acf--cards--padding);
		left: var(--acf--cards--padding);
		transform: translateY(50%);
		//
		span {
			text-decoration: underline;
			text-underline-offset: 2px;
			text-decoration-color: var(--wp--preset--color--nu-red);
			font-size: var(--wp--preset--font--size--16-24);
		}
		.svg-inline--fa {
			color: var(--wp--preset--color--black);
			vertical-align: top;
			font-size: small;
			@extend %transition;
		}
	}
	> div {
		a {
			text-decoration: none;
		}
	}
	&:hover {
		.is-the-view-more-link {
			span {
				text-decoration: none;
			}
		}
	}
	&.has-clickable-link-title {
		> div {
			padding-bottom: calc(var(--acf--cards--padding) * 2);
		}
	}
}
//
//
//
:is(.blocks--wrapper .acf-block.cards[data-clickable-area="true"]) {
	@include nu__boxshadow(0);
	@extend %transition;
	cursor: pointer;
	.wp-block-image {
		overflow: hidden;
		img {
			@extend %transition;
			transform: scale(1);
		}
	}

	&:hover {
		@include nu__boxshadow(5);
		.wp-block-image.size-full:first-of-type {
			overflow: hidden;
			img {
				transform: scale(1.2);
			}
		}
		> div {
			a {
				text-decoration: none;
			}
		}
	}
}
//
//
//
:is(.acf-block.cards.has-transparent-background-color) {
	border: 1px solid var(--wp--preset--color--black);
}
:is(.acf-block.cards.has-black-background-color) {
	border: 1px solid transparent;
}

// any card that is the only child of a column block will fill that column space vertically.
// this may clash with the vertical align but it seems fine
:where(.wp-block-column > .acf-block.cards:only-child) {
	height: 100%;
	> div {
		height: 100%;
	}
}
