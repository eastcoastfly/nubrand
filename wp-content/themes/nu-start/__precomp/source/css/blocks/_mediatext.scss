/* 
	media+text block styles
	this compiles to the block editor and front end - restrict front end only styles with .blocks--wrapper
*/

//
//
//
:is(.wp-block-media-text) {
	// ? flush content against vertical edges
	.wp-block-media-text__content {
		@include flush_inner_content_vertical();
	}
	// ? often, a button is the last child, and we want more spacing above it after the content
	.wp-block-buttons:last-child {
		margin-top: $margin_3x;
	}

	// ? flush the outer horiztonal edge, padding the inner edge
	@include media(">small") {
		&:not(.has-media-on-the-right) {
			.wp-block-media-text__content {
				padding-right: 0;
				padding-left: 16%;
			}
		}
		&.has-media-on-the-right {
			.wp-block-media-text__content {
				padding-left: 0;
				padding-right: 16%;
			}
		}
	}

	@include media("<=small") {
		gap: $margin_2x;
		grid-template-columns: 100% !important;
		.wp-block-media-text__media {
			grid-row: 1;
			grid-column: 1;
		}
		//
		.wp-block-media-text__content {
			grid-row: 2;
			grid-column: 1;
		}
		&,
		&.has-media-on-the-right {
			//
			> .wp-block-media-text__media {
				grid-row: 1;
				grid-column: 1;
			}

			//
			> .wp-block-media-text__content {
				grid-row: 2;
				grid-column: 1;
			}
		}
		> .wp-block-media-text__content {
			padding: 0;
		}
	}
}
//
//
:is(.blocks--wrapper .wp-block-media-text) {
	// ? if hyperlinked
	.wp-block-media-text__media a {
		display: block;
		border: none 0;
		overflow: hidden;
		//
		img {
			@extend %transition;
			transform: scale(1);
		}
		//
		&:hover {
			border: none 0;
			//
			img {
				transform: scale(1.2);
			}
		}
	}
}

:is(.wp-block-media-text.is-style-squared-card) {
	> .wp-block-media-text__content {
		@include the_shadow_card_style;
	}
	gap: 0px;
	// ? desktop only please
	@include media(">=small") {
		// the media side is oversized by a set value of 64px (margin2x)
		// height is set to fill; based on width

		> .wp-block-media-text__media {
			position: relative;
			z-index: 2;
			width: calc(100% + #{$margin_2x});
			max-width: calc(100% + #{$margin_2x});
			&,
			img {
				height: 100%;
			}
			@include aspect-ratio(1, 1);
			img {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
			}
		}
		> .wp-block-media-text__content {
			margin-top: $margin_2x;
			margin-bottom: $margin_2x;
			height: calc(100% - #{$margin_6x});
			padding: $margin_6x;
			padding-left: $margin_8x;
			display: flex;
			flex-flow: column nowrap;
			justify-content: center;
		}
		//
		// CMS applied conditional class switching media and content side to media on right
		&.has-media-on-the-right {
			> .wp-block-media-text__media {
				transform: translateX(-#{$margin_2x});
			}
			> .wp-block-media-text__content {
				padding-left: $margin_6x;
				padding-right: $margin_8x;
			}
		}
	}
}
